var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={exports:{}};!function(t){const e=Math.pow(1,-10);class r{constructor(t,e,r,o){this.x=t,this.y=e,this.width=r,this.height=o}round(){return new r(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height))}static intersect(t,e){const o=new r(0,0,0,0);o.x=Math.max(t.x,e.x),o.y=Math.max(t.y,e.y);const n=Math.min(t.x+t.width,e.x+e.width),i=Math.min(t.y+t.height,e.y+e.height);return o.width=n-o.x,o.height=i-o.y,o}static union(t,e){const o=new r(0,0,0,0),n=Math.min(t.x,e.x),i=Math.max(t.x+t.width,e.x+e.width),a=Math.min(t.y,e.y),s=Math.max(t.y+t.height,e.y+e.height);return o.x=n,o.y=a,o.width=i-n,o.height=s-a,o}static area(t){return t.width*t.height}static iou(t,e){const o=r.intersect(t,e),n=r.union(t,e);return this.area(o)/this.area(n)}static mix(t,e,r){return t*(1-r)+e*r}static iouAvgRect(t,e){const o=r.iou(t,e),n=r.mix(t.x,e.x,o),i=r.mix(t.y,e.y,o),a=r.mix(t.x+t.width,e.x+e.width,o),s=r.mix(t.y+t.height,e.y+e.height,o);return new r(n,i,a-n,s-i)}}class o{constructor(t=0,e=0){this.x=t,this.y=e}static fromObject(t){return t?new o(t.x||0,t.y||0):new o}add(t){return new o(this.x+t.x,this.y+t.y)}sub(t){return new o(this.x-t.x,this.y-t.y)}neg(){return new o(-this.x,-this.y)}multScalar(t){return new o(this.x*t,this.y*t)}divScalar(t){if(Math.abs(t)<e)throw new Error("divScalar: scalar is too close to 0.");return new o(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}normalized(){const t=this.norm();return t<e?new o(0,0):new o(this.x/t,this.y/t)}norm(){return Math.sqrt(this.x*this.x+this.y*this.y)}clone(){return new o(this.x,this.y)}setTo(t){this.x=t.x,this.y=t.y}}function n(t){let e=0,r=0;return t.forEach((({x:t,y:o})=>{e+=t,r+=o})),new o(e/t.length,r/t.length)}class i{constructor(){this.data=[]}writeZeroes(t){for(let e=0;e<t;e+=1)this.data.push(0)}write(t){this.data.push(t||0)}writeNumArray(t,e){if(null===t||0===t.length)return void this.writeZeroes(e);for(let e=0;e<t.length;e+=1)this.write(t[e]);const r=e-t.length;this.writeZeroes(r)}writePoint(t){this.write(t.x),this.write(t.y)}writePointArray(t,e){if(null===t||0===t.length)return void this.writeZeroes(2*e);for(let e=0;e<t.length;e+=1)this.writePoint(t[e]);const r=e-t.length;this.writeZeroes(2*r)}toFloat32(){return new Float32Array(this.data)}toFloat64(){return new Float64Array(this.data)}}t.Color=class{constructor(t,e,r,o=255){this.r=t,this.g=e,this.b=r,this.a=o}},t.FacePoints=class{constructor(){this.outerMouth=null,this.innerMouth=null,this.leftEye=null,this.rightEye=null,this.leftBrow=null,this.rightBrow=null,this.nose=null,this.contour=null,this.foreheadPt=null,this.rightEye3D=[65.9,25.8,200.7],this.leftEye3D=[-65.9,25.8,200.7],this.nose3D=[0,-69.7,259.8],this.mouth3D=[0,-132.5,215.1],this.rightEyeInnerCorner3D=[32.6,27.1,196.5],this.leftEyeInnerCorner3D=[-32.6,27.1,196.5],this.rightEyeOuterCorner3D=[105.638,26.872,185.49],this.leftEyeOuterCorner3D=[-105.638,26.872,185.49],this.rightNose3D=[32.559,-20.731,206.171],this.leftNose3D=[-32.559,-20.731,206.171],this.modelMatrix=null,this.projectionViewMatrix=null,this.modelViewProjectionMatrix=null,this.faceRotation=[0,0,0],this.faceTranslation=[0,0,0]}static serialize(t){const e=new i;return e.writePointArray(t.outerMouth,13),e.writePointArray(t.innerMouth,8),e.writePointArray(t.leftEye,10),e.writePointArray(t.rightEye,10),e.writePointArray(t.leftBrow,7),e.writePointArray(t.rightBrow,7),e.writePointArray(t.nose,7),e.writePointArray(t.contour,3),e.writeNumArray([t.foreheadPt.x,t.foreheadPt.y],2),e.writeNumArray(t.faceRotation,3),e.writeNumArray(t.faceTranslation,3),e.writeNumArray(t.modelViewProjectionMatrix,12),e.writeNumArray(t.modelMatrix,16),e.writeNumArray(t.projectionViewMatrix,12),e.writeNumArray(t.rightEye3D,3),e.writeNumArray(t.leftEye3D,3),e.writeNumArray(t.nose3D,3),e.writeNumArray(t.mouth3D,3),e.writeNumArray(t.rightEyeInnerCorner3D,3),e.writeNumArray(t.leftEyeInnerCorner3D,3),e.writeNumArray(t.rightEyeOuterCorner3D,3),e.writeNumArray(t.leftEyeOuterCorner3D,3),e.writeNumArray(t.rightNose3D,3),e.writeNumArray(t.leftNose3D,3),new Uint8Array(e.toFloat32().buffer)}pose2DPoints(){const t=n(this.rightEye),e=n(this.leftEye),r=n(this.nose),o=n(this.outerMouth);return[t.x,t.y,e.x,e.y,r.x,r.y,o.x,o.y,this.rightEye[0].x,this.rightEye[0].y,this.leftEye[5].x,this.leftEye[5].y,this.rightEye[5].x,this.rightEye[5].y,this.leftEye[0].x,this.leftEye[0].y,this.nose[6].x,this.nose[6].y,this.nose[0].x,this.nose[0].y]}pose3DPoints(){return this.rightEye3D.concat(this.leftEye3D,this.nose3D,this.mouth3D,this.rightEyeInnerCorner3D,this.leftEyeInnerCorner3D,this.rightEyeOuterCorner3D,this.leftEyeOuterCorner3D,this.rightNose3D,this.leftNose3D)}},t.FloatWriter=i,t.PixelData=class{constructor(t,e,r){this.buffer=t,this.width=e,this.height=r}},t.Point=o,t.Rect=r,t.Timer=class{constructor(){this.reset()}reset(){this.startTime=(new Date).getTime()}timePassed(){return(new Date).getTime()-this.startTime}static measure(t){const e=(new Date).getTime();return t(),(new Date).getTime()-e}},t.assert=(t,e=null)=>{if(!t)throw console.error(e),new Error(`Assertion failed: ${e}`)},t.estimateForeheadPoint=(t,e)=>{const{width:r,height:n}=t,[i,a,s]=e,l=t.x+t.width/2,u=t.y+t.height/2,h=new o(l,u);h.x+=-Math.sin(a)*r/2,h.y+=(1-Math.cos(i))*n/2;const c=new o(Math.sin(s),-Math.cos(s)),_=new o(c.x*n/2,c.y*n/2);return new o(h.x+_.x,h.y+_.y)},Object.defineProperty(t,"__esModule",{value:!0})}(e.exports);const r=(t,e=null)=>{if(!t)throw console.error(e),new Error(`Assertion failed: ${e}`)};class o{constructor(t,e,r){this.buffer=t,this.width=e,this.height=r}}const n=Math.pow(1,-10);class i{constructor(t=0,e=0){this.x=t,this.y=e}static fromObject(t){return t?new i(t.x||0,t.y||0):new i}add(t){return new i(this.x+t.x,this.y+t.y)}sub(t){return new i(this.x-t.x,this.y-t.y)}neg(){return new i(-this.x,-this.y)}multScalar(t){return new i(this.x*t,this.y*t)}divScalar(t){if(Math.abs(t)<n)throw new Error("divScalar: scalar is too close to 0.");return new i(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}normalized(){const t=this.norm();return t<n?new i(0,0):new i(this.x/t,this.y/t)}norm(){return Math.sqrt(this.x*this.x+this.y*this.y)}clone(){return new i(this.x,this.y)}setTo(t){this.x=t.x,this.y=t.y}}function a(t){let e=0,r=0;return t.forEach((({x:t,y:o})=>{e+=t,r+=o})),new i(e/t.length,r/t.length)}class s{constructor(){this.data=[]}writeZeroes(t){for(let e=0;e<t;e+=1)this.data.push(0)}write(t){this.data.push(t||0)}writeNumArray(t,e){if(null===t||0===t.length)return void this.writeZeroes(e);for(let e=0;e<t.length;e+=1)this.write(t[e]);const r=e-t.length;this.writeZeroes(r)}writePoint(t){this.write(t.x),this.write(t.y)}writePointArray(t,e){if(null===t||0===t.length)return void this.writeZeroes(2*e);for(let e=0;e<t.length;e+=1)this.writePoint(t[e]);const r=e-t.length;this.writeZeroes(2*r)}toFloat32(){return new Float32Array(this.data)}toFloat64(){return new Float64Array(this.data)}}class l{constructor(){this.outerMouth=null,this.innerMouth=null,this.leftEye=null,this.rightEye=null,this.leftBrow=null,this.rightBrow=null,this.nose=null,this.contour=null,this.foreheadPt=null,this.rightEye3D=[65.9,25.8,200.7],this.leftEye3D=[-65.9,25.8,200.7],this.nose3D=[0,-69.7,259.8],this.mouth3D=[0,-132.5,215.1],this.rightEyeInnerCorner3D=[32.6,27.1,196.5],this.leftEyeInnerCorner3D=[-32.6,27.1,196.5],this.rightEyeOuterCorner3D=[105.638,26.872,185.49],this.leftEyeOuterCorner3D=[-105.638,26.872,185.49],this.rightNose3D=[32.559,-20.731,206.171],this.leftNose3D=[-32.559,-20.731,206.171],this.modelMatrix=null,this.projectionViewMatrix=null,this.modelViewProjectionMatrix=null,this.faceRotation=[0,0,0],this.faceTranslation=[0,0,0]}static serialize(t){const e=new s;return e.writePointArray(t.outerMouth,13),e.writePointArray(t.innerMouth,8),e.writePointArray(t.leftEye,10),e.writePointArray(t.rightEye,10),e.writePointArray(t.leftBrow,7),e.writePointArray(t.rightBrow,7),e.writePointArray(t.nose,7),e.writePointArray(t.contour,3),e.writeNumArray([t.foreheadPt.x,t.foreheadPt.y],2),e.writeNumArray(t.faceRotation,3),e.writeNumArray(t.faceTranslation,3),e.writeNumArray(t.modelViewProjectionMatrix,12),e.writeNumArray(t.modelMatrix,16),e.writeNumArray(t.projectionViewMatrix,12),e.writeNumArray(t.rightEye3D,3),e.writeNumArray(t.leftEye3D,3),e.writeNumArray(t.nose3D,3),e.writeNumArray(t.mouth3D,3),e.writeNumArray(t.rightEyeInnerCorner3D,3),e.writeNumArray(t.leftEyeInnerCorner3D,3),e.writeNumArray(t.rightEyeOuterCorner3D,3),e.writeNumArray(t.leftEyeOuterCorner3D,3),e.writeNumArray(t.rightNose3D,3),e.writeNumArray(t.leftNose3D,3),new Uint8Array(e.toFloat32().buffer)}pose2DPoints(){const t=a(this.rightEye),e=a(this.leftEye),r=a(this.nose),o=a(this.outerMouth);return[t.x,t.y,e.x,e.y,r.x,r.y,o.x,o.y,this.rightEye[0].x,this.rightEye[0].y,this.leftEye[5].x,this.leftEye[5].y,this.rightEye[5].x,this.rightEye[5].y,this.leftEye[0].x,this.leftEye[0].y,this.nose[6].x,this.nose[6].y,this.nose[0].x,this.nose[0].y]}pose3DPoints(){return this.rightEye3D.concat(this.leftEye3D,this.nose3D,this.mouth3D,this.rightEyeInnerCorner3D,this.leftEyeInnerCorner3D,this.rightEyeOuterCorner3D,this.leftEyeOuterCorner3D,this.rightNose3D,this.leftNose3D)}}class u{constructor(){this.reset()}reset(){this.startTime=(new Date).getTime()}timePassed(){return(new Date).getTime()-this.startTime}static measure(t){const e=(new Date).getTime();return t(),(new Date).getTime()-e}}class h{constructor(t,e,r,o,n){const i=(t,e)=>void 0!==t?t:e;this.r=i(t,0),this.g=i(e,0),this.b=i(r,0),this.a=255,this.amount=i(o,1),this.gloss=i(n,0),this.glitter=0,this.glitterDensity=1,this.glitterColorR=255,this.glitterColorG=255,this.glitterColorB=255,this.useDynamicColor=!0,this.contrastBoost=0,this.skinClearing=0,this.skinGlow=0,this.isSkinGlowDynamicByRotation=!0,this.glitterSize=1,this.glitterBaseReflectivity=.3,this.glitterColorVariation=0,this.glitterSizeVariation=0,this.glossDetail=0,this.wetness=0,this.envMappingIntensity=0,this.envMappingR=255,this.envMappingG=255,this.envMappingB=255,this.envMappingRotationY=0,this.envMappingCurve=2.3,this.envMappingBumpIntensity=0,this.metallicIntensity=0,this.metallicRoughness=0,this.matteness=0,this.vinylIntensity=0,this.textureBoost=0,this.lustre=0,this.opaqueness=0}}const c={data:{blush:["apple","apple2","apple2_intense","apple_blended","apple_blended_intense","apple_intense","cheekbone","cheekbone_intense","contour","default_intense","full_cheek","full_cheek_intense","lower_cheek","lower_cheek_intense","none","upper_cheek","upper_cheek_intense","default"],brow:["default"],concealer:["default"],contour:["forehead_side","forehead_side2","highlight","default","inner_eyebrow"],cushion:["default"],eyeliner:["angular_both","angular_top","Bold_eyeliner_both","Bold_eyeliner_top","butterfly_liner_both","butterfly_liner_top","butterfly_mask_both","butterfly_mask_top","cateye2_both","cateye2_top","cateye_both","cateye_top","cheetah_mask_both","cheetah_mask_top","cheetah_winged_both","cheetah_winged_top","Confident_eyeliner_both","Confident_eyeliner_top","crease_box_both","crease_box_top","crease_flare_both","crease_flare_top","crease_simple_long_both","crease_simple_long_top","crease_simple_short_both","crease_simple_short_top","double_winged_both","double_winged_top","elongated_bottom_both","elongated_bottom_top","extrasmallwinged_both","extrasmallwinged_top","fashion_look2_eyeliner_both","fashion_look2_eyeliner_top","GetTheLook_look1_eyeliner_both","GetTheLook_look1_eyeliner_top","GetTheLook_look3_eyeliner_both","GetTheLook_look3_eyeliner_top","halloween1_both","halloween1_top","halloween2_both","halloween2_top","halloween3_both","halloween3_top","halloween4_both","halloween4_top","halloween5_both","halloween5_top","innermid_crease_both","innermid_crease_top","kaja_both","kaja_top","kohl_both","kohl_top","la_inner_winged_both","la_inner_winged_top","la_mask_both","la_mask_top","la_middle_winged_both","la_middle_winged_top","la_outer_winged_both","la_outer_winged_top","MNY_FashionWeek_look1_liner1_both","MNY_FashionWeek_look1_liner1_top","MNY_FashionWeek_look1_liner2_both","MNY_FashionWeek_look1_liner2_top","MNY_FashionWeek_look1_liner3_both","MNY_FashionWeek_look1_liner3_top","MNY_Holiday_look1_eyeliner_crease_both","MNY_Holiday_look1_eyeliner_crease_top","MNY_Holiday_look2_eyeliner_outer_both","MNY_Holiday_look2_eyeliner_outer_top","MNY_Holiday_look2_eyeliner_under_both","MNY_Holiday_look2_eyeliner_under_top","natural","natural2_both","natural2_top","natural_both","natural_top","none_both","none_top","OAP_Halloween2020_look1_both","OAP_Halloween2020_look1_top","OAP_Halloween2020_look2_both","OAP_Halloween2020_look2_top","OAP_Halloween2020_look3_both","OAP_Halloween2020_look3_top","OAP_Halloween2020_look4_both","OAP_Halloween2020_look4_top","Powerful_eyeliner_both","Powerful_eyeliner_top","prima_ballerina_liner_both","prima_ballerina_liner_top","puppyeye_both","puppyeye_top","sharpwinged_inner_both","sharpwinged_inner_top","sharpwinged_outer_both","sharpwinged_outer_top","smallwinged_both","smallwinged_top","smokeyfull_both","smokeyfull_top","smoky2_both","smoky2_top","smokynautral_both","smokynautral_top","smoky_both","smoky_top","smudged_bottom_both","smudged_bottom_top","smudged_winged_both","smudged_winged_top","subtle_both","subtle_top","swoop_winged_liner_both","swoop_winged_liner_top","tear_both","tear_top","thick_winged_crease_both","thick_winged_crease_top","top_both","top_top","waterline_both","waterline_thick_both","waterline_thick_top","waterline_top","winged2_both","winged2_top","wingedsimple_both","wingedsimple_top","wingedthick_both","wingedthick_top","wingedthin_both","wingedthin_top","winged_both","winged_crease2_both","winged_crease2_top","winged_crease_both","winged_crease_top","winged_top"],eyeshadow:["angular_full","angular_liner","angular_overlay","Asian_1color","Asian_2color_A1","Asian_2color_A2","Asian_2color_B1","Asian_2color_B2","Asian_3color_A1","Asian_3color_A2","Asian_3color_A3","Asian_3color_B1","Asian_3color_B2","Asian_3color_B3","Azuki_Look_1","Azuki_Look_2","below_iris","black","bluelook1_a","bluelook1_b","bluelook1_b1","bluelook1_b2","bluelook1_c","bluelook2_a","bluelook2_b","bluelook2_c","bluelook2_eyebrow","bluelook3_a","bluelook3_b","bluelook3_c","bronze","browline2","butterfly_inner","center","centre_lid","cheetah_lid","cleopatra2_liner","colourqueenlook1_part1","colourqueenlook1_part2","colourqueenlook3_part1","colourqueenlook3_part2","Confident_eyeshadow","contour","crease3","deep_aqua","deep_blue","deep_blue_2","deep_blue_fade","elongated_bottom_liner","elongated_lid","energeticorange_part1","energeticorange_part2","energeticorange_part3","energeticorange_part4","eyegowild_look2_lower","eyegowild_look2_upper","eyegowild_look4","eyegowild_look4_liner","eyegowild_look5_liner","eyegowild_look5_lower","eyegowild_look5_upper","eyegowild_look6","eyegowild_look6_liner","fashion_look1_part1","fashion_look1_part2","fashion_look2_part1","fashion_look2_part2","fashion_look3_part1","fashion_look3_part2","fashion_look4_part1","fashion_look4_part2","framed","full_lid3","GetTheLook_look1_eyeshadow1","GetTheLook_look1_eyeshadow2","GetTheLook_look1_eyeshadow3","GetTheLook_look1_eyeshadow4","GetTheLook_look2_eyeshadow1","GetTheLook_look2_eyeshadow2","GetTheLook_look3_eyeshadow","gold","Graphic_3_Liner","green","half_inner_lid","halloween1","halloween2","halloween3","indigomotion_part1","indigomotion_part2","indigomotion_part3","indigomotion_part4","innercorner","innermid_crease_liner","la_tear","light_blue","lowerlash2","lowerlash_thick","MNY_FashionWeek_look1_shadow1","MNY_FashionWeek_look1_shadow2","MNY_FashionWeek_look1_shadow3","MNY_Holiday_look1_eyeshadow_crease","MNY_Holiday_look2_eyeshadow_outer","MNY_Holiday_look2_eyeshadow_under","natural_liner","none","OP_look1_CS1","OP_look1_M3","OP_look1_ME5","OP_look1_ME6","OP_look2_CS1","OP_look2_P1","OP_look3_CS1","OP_look3_ME4","OP_look3_P1","OP_look4_ME6","OP_look4_P2","OP_look5_CS1","OP_look5_M3","OP_look5_M5","OP_look5_P4","OP_look6_CS1","OP_look6_M4","OP_look6_ME5","OP_look6_P3","OP_look7_G1","OP_look7_P1","OP_look7_PR1","OP_look8_G1","OP_look8_ME2","OP_look8_ME4","orangelook4_a","orangelook4_b","orangelook4_c","orangelook5_a","orangelook5_b","orangelook5_c","orangelook5_eyebrow","orangelook6_a","orangelook6_b","orangelook6_c","outer_corner_framed","outer_half_top","Powerful_eyeshadow_part1","Powerful_eyeshadow_part2","prima_ballerina_shadow","sharplid_full","sharp_lid2","side_crease","side_lid","sportykick_part1","sportykick_part2","sportykick_part3","sportykick_part4","summerpunch_part1","summerpunch_part2","summerpunch_part3","summerpunch_part4","tokyosunrise_part1","tokyosunrise_part2","tokyosunrise_part3","tokyosunrise_part4","winged_crease","default","full_lid","outer","inner","crease","brow_highlight","full_lid2","outer2","tear","crease2","browline","lowerlash","innerhalf","outerhalf","rectangular","smokycateye","fullcateye","cleopatra1","cleopatra2","full_smoky_lid","full_smoky_winged","fulllid_winged","innerlid","sharp_crease","sharp_lid","sharpinner_lid","sharpouter_corner","sharpwinged_inner","sharpwinged_outer"],foundation:["default"],highlight:["cheek1","cheek2","cheek3","cheek4","chin","contour","cupidsbow","eyebrow","forehead","glow1_cherie","glow2_monamour","glow3_lavieenglow","glow3_lavieenglow2","glow4_sorbet","nose1","nose2","nose3","upperlip","default"],lipcolor:["inner_horizontal","inner_vertical","outer_horizontal","outer_vertical","default"],lipliner:["default"],mascara:["doll","doll_2","doll_2_full","drama","drama_full","extreme","extreme_full","fashion_look2_lash","FA_Asia_2_4","FA_Asia_2_5","grandiose","grandiose_full","idole_lash","length","lower","natural","naturallength","naturallength_2","naturalvolume","naturalvolumelength","naturalvolumelength_lower","naturalvolume_lower","naturalwhispy","naturalwhispy_lower","natural_2","natural_2_full","none","prima_ballerina_bottom_mascara","prima_ballerina_top_mascara","subtle","subtle_full","volume","volumelength","volume_2","volume_2_full"],primer:["default"],settingspray:["default"]}};function _(t){return c.data[t]}function p(t){return _(t).reduce(((e,r)=>{const o=e;return o[r]=`${t}_${r}.png`,o}),{})}const f=Object.assign(Object.assign(Object.assign({blush:"blush.png",highlight:"highlight.png",contour:"contour.png",overlay:"white.png"},p("blush")),p("contour")),p("highlight"));_("blush"),_("contour"),_("highlight");const d=Object.assign(Object.assign({},p("eyeliner")),{natural_top:"natural_top.png"});_("eyeliner");const y=Object.assign({},p("eyeshadow"));_("eyeshadow"),Object.assign({},p("lipcolor")),_("lipcolor");const w=Object.assign(Object.assign({},p("mascara")),{doll:"doll.png",length:"length.png",lower:"lower.png",natural:"natural.png",naturallength:"naturallength.png",volume:"volume.png",volumelength:"volumelength.png"});_("mascara");class g{constructor(t){this.product=t||null}}class m extends g{constructor(t,e,r){super(t),this.blendMode="makeup",this.targetSide="both",this.maskImagePath=e,this.maskImageSize=r}}class b extends g{constructor(t,e="default",r="full"){super(t),this.presetStyle="default",this.placement="full",this.blurFactor=1.3,this.blurFactorInner=1.3,this.lipMeshNumRowsUpper=0,this.lipMeshNumColsUpper=0,this.lipMeshNumRowsLower=0,this.lipMeshNumColsLower=0,this.presetStyle=e,this.placement=r}}class v extends m{constructor(t,e,r=null,o={width:250,height:188}){let n=r;n||(n=`Eyeliner/${d[e]?d[e]:d.natural_top}`),super(t,n,o),this.presetStyle=e,this.referenceEyePoints=[new i(78,120),new i(136,103),new i(191,136),new i(138,137)]}}class k extends m{constructor(t,e,r=null,o={width:200,height:131}){let n=r;n||(n=`Mascara/${w[e]?w[e]:w.natural}`),super(t,n,o),this.presetStyle=e,this.referenceEyePoints=[new i(53,75),new i(117,55),new i(182,93),new i(117,91)]}}class x extends m{constructor(t,e,r=null,o={width:250,height:188}){let n=r;n||(n=`Eyeshadow/${y[e]?y[e]:y.full_lid}`),super(t,n,o),this.presetStyle=e,this.referenceEyePoints=[new i(78,118),new i(136,102),new i(199,133),new i(138,143)],this.referenceBrowPoints=[new i(14,65),new i(84,38),new i(215,65)],this.deformationAreaFactor=2}}class P extends m{constructor(t,e,r=null,o={width:180,height:195}){let n=r;n||(n=`Blush/${f[e]?f[e]:f.blush}`),super(t,n,o),this.presetStyle=e}}class A extends m{constructor(t,e,r=null,o={width:180,height:195}){const n={default:"concealer_mask.png",overlay:"white.png"};let i=r;i||(i=`Concealer/${n[e]?n[e]:n.blush}`),super(t,i,o),this.presetStyle=e}}class O extends m{constructor(t,e="overlay"){const r={overlay:"overlay-mask.png",overlayFilled:"overlay-mask-filled.png"};let o=t;o||(o=r[e]?r[e]:r.overlay),super(new h,o,{width:256,height:256}),this.presetStyle=e,this.blendMode="alphaBlend"}}class M extends m{constructor(t,e,r,o,n,i,a,s,l,u,h,c,_,p,f){super(t,e,r),this.referenceLeftEyePoints=o,this.referenceLeftBrowPoints=n,this.referenceRightEyePoints=i,this.referenceRightBrowPoints=a,this.referenceOuterMouthPoints=s,this.referenceInnerMouthPoints=l,this.referenceFacePoints=u,this.referenceForeheadPoints=h,this.referenceNosePoints=c,this.referenceCheekPoints=_,this.referenceLeftExtendedBrowPoints=p,this.referenceRightExtendedBrowPoints=f,this.referenceIsMouthOpen=!1,this.referenceIsContourUsed=!1,this.deformationAreaFactor=1,this.eraseExpandFactorTop=1,this.eraseExpandFactorHorizontal=1,this.eraseBlurFactor=1,this.topLeftEyeWeight=1,this.bottomLeftEyeWeight=1,this.topRightEyeWeight=1,this.bottomRightEyeWeight=1,this.topLeftBrowWeight=.01,this.bottomLeftBrowWeight=.01,this.topRightBrowWeight=.01,this.bottomRightBrowWeight=.01,this.topOuterLipWeight=1,this.bottomOuterLipWeight=1,this.topInnerLipWeight=1,this.bottomInnerLipWeight=1,this.leftNoseWeight=1,this.middleNoseWeight=1,this.rightNoseWeight=1,this.leftFaceWeight=.01,this.chinWeight=.01,this.rightFaceWeight=.01,this.rightTempleWeight=.01,this.foreheadWeight=.01,this.leftTempleWeight=.01}}class D extends m{constructor(t,e,r){super(t,e,{width:0,height:0}),this.maskJSONPath=r}}class j extends D{constructor(t,e,r){super(t,e,r),this.eraseAmount=1}}class E extends D{}class T extends g{}var S,N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},L={exports:{}};!function(t,e){var r="__lodash_hash_undefined__",o=9007199254740991,n="[object Arguments]",i="[object Boolean]",a="[object Date]",s="[object Function]",l="[object GeneratorFunction]",u="[object Map]",h="[object Number]",c="[object Object]",_="[object Promise]",p="[object RegExp]",f="[object Set]",d="[object String]",y="[object Symbol]",w="[object WeakMap]",g="[object ArrayBuffer]",m="[object DataView]",b="[object Float32Array]",v="[object Float64Array]",k="[object Int8Array]",x="[object Int16Array]",P="[object Int32Array]",A="[object Uint8Array]",O="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]",j=/\w*$/,E=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,S={};S[n]=S["[object Array]"]=S[g]=S[m]=S[i]=S[a]=S[b]=S[v]=S[k]=S[x]=S[P]=S[u]=S[h]=S[c]=S[p]=S[f]=S[d]=S[y]=S[A]=S[O]=S[M]=S[D]=!0,S["[object Error]"]=S[s]=S[w]=!1;var L="object"==typeof N&&N&&N.Object===Object&&N,C="object"==typeof self&&self&&self.Object===Object&&self,F=L||C||Function("return this")(),I=e&&!e.nodeType&&e,B=I&&t&&!t.nodeType&&t,R=B&&B.exports===I;function W(t,e){return t.set(e[0],e[1]),t}function H(t,e){return t.add(e),t}function G(t,e,r,o){var n=-1,i=t?t.length:0;for(o&&i&&(r=t[++n]);++n<i;)r=e(r,t[n],n,t);return r}function z(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function $(t){var e=-1,r=Array(t.size);return t.forEach((function(t,o){r[++e]=[o,t]})),r}function J(t,e){return function(r){return t(e(r))}}function U(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var Y,V=Array.prototype,q=Function.prototype,Z=Object.prototype,X=F["__core-js_shared__"],K=(Y=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",Q=q.toString,tt=Z.hasOwnProperty,et=Z.toString,rt=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=R?F.Buffer:void 0,nt=F.Symbol,it=F.Uint8Array,at=J(Object.getPrototypeOf,Object),st=Object.create,lt=Z.propertyIsEnumerable,ut=V.splice,ht=Object.getOwnPropertySymbols,ct=ot?ot.isBuffer:void 0,_t=J(Object.keys,Object),pt=Ft(F,"DataView"),ft=Ft(F,"Map"),dt=Ft(F,"Promise"),yt=Ft(F,"Set"),wt=Ft(F,"WeakMap"),gt=Ft(Object,"create"),mt=Ht(pt),bt=Ht(ft),vt=Ht(dt),kt=Ht(yt),xt=Ht(wt),Pt=nt?nt.prototype:void 0,At=Pt?Pt.valueOf:void 0;function Ot(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function Mt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function Dt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function jt(t){this.__data__=new Mt(t)}function Et(t,e,r){var o=t[e];tt.call(t,e)&&Gt(o,r)&&(void 0!==r||e in t)||(t[e]=r)}function Tt(t,e){for(var r=t.length;r--;)if(Gt(t[r][0],e))return r;return-1}function St(t,e,r,o,_,w,E){var T;if(o&&(T=w?o(t,_,w,E):o(t)),void 0!==T)return T;if(!Yt(t))return t;var N=zt(t);if(N){if(T=function(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!e)return function(t,e){var r=-1,o=t.length;for(e||(e=Array(o));++r<o;)e[r]=t[r];return e}(t,T)}else{var L=Bt(t),C=L==s||L==l;if(Jt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(L==c||L==n||C&&!w){if(z(t))return w?t:{};if(T=function(t){return"function"!=typeof t.constructor||Wt(t)?{}:Yt(e=at(t))?st(e):{};var e}(C?{}:t),!e)return function(t,e){return Lt(t,It(t),e)}(t,function(t,e){return t&&Lt(e,Vt(e),t)}(T,t))}else{if(!S[L])return w?t:{};T=function(t,e,r,o){var n,s=t.constructor;switch(e){case g:return Nt(t);case i:case a:return new s(+t);case m:return function(t,e){var r=e?Nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,o);case b:case v:case k:case x:case P:case A:case O:case M:case D:return function(t,e){var r=e?Nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,o);case u:return function(t,e,r){return G(e?r($(t),!0):$(t),W,new t.constructor)}(t,o,r);case h:case d:return new s(t);case p:return function(t){var e=new t.constructor(t.source,j.exec(t));return e.lastIndex=t.lastIndex,e}(t);case f:return function(t,e,r){return G(e?r(U(t),!0):U(t),H,new t.constructor)}(t,o,r);case y:return n=t,At?Object(At.call(n)):{}}}(t,L,St,e)}}E||(E=new jt);var F=E.get(t);if(F)return F;if(E.set(t,T),!N)var I=r?function(t){return function(t,e,r){var o=e(t);return zt(t)?o:function(t,e){for(var r=-1,o=e.length,n=t.length;++r<o;)t[n+r]=e[r];return t}(o,r(t))}(t,Vt,It)}(t):Vt(t);return function(t,e){for(var r=-1,o=t?t.length:0;++r<o&&!1!==e(t[r],r););}(I||t,(function(n,i){I&&(n=t[i=n]),Et(T,i,St(n,e,r,o,i,t,E))})),T}function Nt(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function Lt(t,e,r,o){r||(r={});for(var n=-1,i=e.length;++n<i;){var a=e[n],s=o?o(r[a],t[a],a,r,t):void 0;Et(r,a,void 0===s?t[a]:s)}return r}function Ct(t,e){var r,o,n=t.__data__;return("string"==(o=typeof(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?n["string"==typeof e?"string":"hash"]:n.map}function Ft(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Yt(t)||(e=t,K&&K in e))&&(Ut(t)||z(t)?rt:E).test(Ht(t));var e}(r)?r:void 0}Ot.prototype.clear=function(){this.__data__=gt?gt(null):{}},Ot.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ot.prototype.get=function(t){var e=this.__data__;if(gt){var o=e[t];return o===r?void 0:o}return tt.call(e,t)?e[t]:void 0},Ot.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:tt.call(e,t)},Ot.prototype.set=function(t,e){return this.__data__[t]=gt&&void 0===e?r:e,this},Mt.prototype.clear=function(){this.__data__=[]},Mt.prototype.delete=function(t){var e=this.__data__,r=Tt(e,t);return!(r<0||(r==e.length-1?e.pop():ut.call(e,r,1),0))},Mt.prototype.get=function(t){var e=this.__data__,r=Tt(e,t);return r<0?void 0:e[r][1]},Mt.prototype.has=function(t){return Tt(this.__data__,t)>-1},Mt.prototype.set=function(t,e){var r=this.__data__,o=Tt(r,t);return o<0?r.push([t,e]):r[o][1]=e,this},Dt.prototype.clear=function(){this.__data__={hash:new Ot,map:new(ft||Mt),string:new Ot}},Dt.prototype.delete=function(t){return Ct(this,t).delete(t)},Dt.prototype.get=function(t){return Ct(this,t).get(t)},Dt.prototype.has=function(t){return Ct(this,t).has(t)},Dt.prototype.set=function(t,e){return Ct(this,t).set(t,e),this},jt.prototype.clear=function(){this.__data__=new Mt},jt.prototype.delete=function(t){return this.__data__.delete(t)},jt.prototype.get=function(t){return this.__data__.get(t)},jt.prototype.has=function(t){return this.__data__.has(t)},jt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Mt){var o=r.__data__;if(!ft||o.length<199)return o.push([t,e]),this;r=this.__data__=new Dt(o)}return r.set(t,e),this};var It=ht?J(ht,Object):function(){return[]},Bt=function(t){return et.call(t)};function Rt(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||T.test(t))&&t>-1&&t%1==0&&t<e}function Wt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Z)}function Ht(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Gt(t,e){return t===e||t!=t&&e!=e}(pt&&Bt(new pt(new ArrayBuffer(1)))!=m||ft&&Bt(new ft)!=u||dt&&Bt(dt.resolve())!=_||yt&&Bt(new yt)!=f||wt&&Bt(new wt)!=w)&&(Bt=function(t){var e=et.call(t),r=e==c?t.constructor:void 0,o=r?Ht(r):void 0;if(o)switch(o){case mt:return m;case bt:return u;case vt:return _;case kt:return f;case xt:return w}return e});var zt=Array.isArray;function $t(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!Ut(t)}var Jt=ct||function(){return!1};function Ut(t){var e=Yt(t)?et.call(t):"";return e==s||e==l}function Yt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Vt(t){return $t(t)?function(t,e){var r=zt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&$t(t)}(t)&&tt.call(t,"callee")&&(!lt.call(t,"callee")||et.call(t)==n)}(t)?function(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o}(t.length,String):[],o=r.length,i=!!o;for(var a in t)!e&&!tt.call(t,a)||i&&("length"==a||Rt(a,o))||r.push(a);return r}(t):function(t){if(!Wt(t))return _t(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return St(t,!0,!0)}}(L,L.exports),function(t){t[t.Medium=0]="Medium",t[t.High=1]="High"}(S||(S={}));var C=function(t,e,r){void 0===t&&(t="Anchor::LeftEyeCenter"),void 0===e&&(e=0),void 0===r&&(r=0),this.offsetUp=0,this.offsetRight=0,this.anchor=t,this.offsetUp=e,this.offsetRight=r},F=function(t,e,r,o,n,i){void 0===r&&(r=""),void 0===o&&(o=0),void 0===n&&(n=25),void 0===i&&(i=50),this.startPoint=t,this.endPoint=e,this.text=r,this.curveAmount=o,this.lineThickness=n,this.arrowSize=i},I=function(){this.angle=0},B=function(){this.category="Category::Unknown",this.animationType="MFEMakeupTutorialAnimationTypeFade"},R=function(){};function W(t,e,r,o){return new(r||(r=Promise))((function(n,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((o=o.apply(t,e||[])).next())}))}function H(t,e){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var G={exports:{}};!function(e,r){var o="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",a="[object Boolean]",s="[object Date]",l="[object Function]",u="[object GeneratorFunction]",h="[object Map]",c="[object Number]",_="[object Object]",p="[object Promise]",f="[object RegExp]",d="[object Set]",y="[object String]",w="[object Symbol]",g="[object WeakMap]",m="[object ArrayBuffer]",b="[object DataView]",v="[object Float32Array]",k="[object Float64Array]",x="[object Int8Array]",P="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",M="[object Uint8ClampedArray]",D="[object Uint16Array]",j="[object Uint32Array]",E=/\w*$/,T=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,N={};N[i]=N["[object Array]"]=N[m]=N[b]=N[a]=N[s]=N[v]=N[k]=N[x]=N[P]=N[A]=N[h]=N[c]=N[_]=N[f]=N[d]=N[y]=N[w]=N[O]=N[M]=N[D]=N[j]=!0,N["[object Error]"]=N[l]=N[g]=!1;var L="object"==typeof t&&t&&t.Object===Object&&t,C="object"==typeof self&&self&&self.Object===Object&&self,F=L||C||Function("return this")(),I=r&&!r.nodeType&&r,B=I&&e&&!e.nodeType&&e,R=B&&B.exports===I;function W(t,e){return t.set(e[0],e[1]),t}function H(t,e){return t.add(e),t}function G(t,e,r,o){var n=-1,i=t?t.length:0;for(o&&i&&(r=t[++n]);++n<i;)r=e(r,t[n],n,t);return r}function z(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function $(t){var e=-1,r=Array(t.size);return t.forEach((function(t,o){r[++e]=[o,t]})),r}function J(t,e){return function(r){return t(e(r))}}function U(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var Y,V=Array.prototype,q=Function.prototype,Z=Object.prototype,X=F["__core-js_shared__"],K=(Y=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",Q=q.toString,tt=Z.hasOwnProperty,et=Z.toString,rt=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=R?F.Buffer:void 0,nt=F.Symbol,it=F.Uint8Array,at=J(Object.getPrototypeOf,Object),st=Object.create,lt=Z.propertyIsEnumerable,ut=V.splice,ht=Object.getOwnPropertySymbols,ct=ot?ot.isBuffer:void 0,_t=J(Object.keys,Object),pt=Bt(F,"DataView"),ft=Bt(F,"Map"),dt=Bt(F,"Promise"),yt=Bt(F,"Set"),wt=Bt(F,"WeakMap"),gt=Bt(Object,"create"),mt=zt(pt),bt=zt(ft),vt=zt(dt),kt=zt(yt),xt=zt(wt),Pt=nt?nt.prototype:void 0,At=Pt?Pt.valueOf:void 0;function Ot(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function Mt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function Dt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function jt(t){this.__data__=new Mt(t)}function Et(t,e){var r=Jt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ut(t)}(t)&&tt.call(t,"callee")&&(!lt.call(t,"callee")||et.call(t)==i)}(t)?function(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o}(t.length,String):[],o=r.length,n=!!o;for(var a in t)!e&&!tt.call(t,a)||n&&("length"==a||Ht(a,o))||r.push(a);return r}function Tt(t,e,r){var o=t[e];tt.call(t,e)&&$t(o,r)&&(void 0!==r||e in t)||(t[e]=r)}function St(t,e){for(var r=t.length;r--;)if($t(t[r][0],e))return r;return-1}function Nt(t,e,r,o,n,p,g){var T;if(o&&(T=p?o(t,n,p,g):o(t)),void 0!==T)return T;if(!qt(t))return t;var S=Jt(t);if(S){if(T=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,o=t.length;e||(e=Array(o));for(;++r<o;)e[r]=t[r];return e}(t,T)}else{var L=Wt(t),C=L==l||L==u;if(Yt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(L==_||L==i||C&&!p){if(z(t))return p?t:{};if(T=function(t){return"function"!=typeof t.constructor||Gt(t)?{}:(e=at(t),qt(e)?st(e):{});var e}(C?{}:t),!e)return function(t,e){return Ft(t,Rt(t),e)}(t,function(t,e){return t&&Ft(e,Zt(e),t)}(T,t))}else{if(!N[L])return p?t:{};T=function(t,e,r,o){var n=t.constructor;switch(e){case m:return Ct(t);case a:case s:return new n(+t);case b:return function(t,e){var r=e?Ct(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,o);case v:case k:case x:case P:case A:case O:case M:case D:case j:return function(t,e){var r=e?Ct(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,o);case h:return function(t,e,r){return G(e?r($(t),!0):$(t),W,new t.constructor)}(t,o,r);case c:case y:return new n(t);case f:return function(t){var e=new t.constructor(t.source,E.exec(t));return e.lastIndex=t.lastIndex,e}(t);case d:return function(t,e,r){return G(e?r(U(t),!0):U(t),H,new t.constructor)}(t,o,r);case w:return i=t,At?Object(At.call(i)):{}}var i}(t,L,Nt,e)}}g||(g=new jt);var F=g.get(t);if(F)return F;if(g.set(t,T),!S)var I=r?function(t){return function(t,e,r){var o=e(t);return Jt(t)?o:function(t,e){for(var r=-1,o=e.length,n=t.length;++r<o;)t[n+r]=e[r];return t}(o,r(t))}(t,Zt,Rt)}(t):Zt(t);return function(t,e){for(var r=-1,o=t?t.length:0;++r<o&&!1!==e(t[r],r,t););}(I||t,(function(n,i){I&&(n=t[i=n]),Tt(T,i,Nt(n,e,r,o,i,t,g))})),T}function Lt(t){return!(!qt(t)||(e=t,K&&K in e))&&(Vt(t)||z(t)?rt:T).test(zt(t));var e}function Ct(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function Ft(t,e,r,o){r||(r={});for(var n=-1,i=e.length;++n<i;){var a=e[n],s=o?o(r[a],t[a],a,r,t):void 0;Tt(r,a,void 0===s?t[a]:s)}return r}function It(t,e){var r,o,n=t.__data__;return("string"==(o=typeof(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?n["string"==typeof e?"string":"hash"]:n.map}function Bt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Lt(r)?r:void 0}Ot.prototype.clear=function(){this.__data__=gt?gt(null):{}},Ot.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ot.prototype.get=function(t){var e=this.__data__;if(gt){var r=e[t];return r===o?void 0:r}return tt.call(e,t)?e[t]:void 0},Ot.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:tt.call(e,t)},Ot.prototype.set=function(t,e){return this.__data__[t]=gt&&void 0===e?o:e,this},Mt.prototype.clear=function(){this.__data__=[]},Mt.prototype.delete=function(t){var e=this.__data__,r=St(e,t);return!(r<0)&&(r==e.length-1?e.pop():ut.call(e,r,1),!0)},Mt.prototype.get=function(t){var e=this.__data__,r=St(e,t);return r<0?void 0:e[r][1]},Mt.prototype.has=function(t){return St(this.__data__,t)>-1},Mt.prototype.set=function(t,e){var r=this.__data__,o=St(r,t);return o<0?r.push([t,e]):r[o][1]=e,this},Dt.prototype.clear=function(){this.__data__={hash:new Ot,map:new(ft||Mt),string:new Ot}},Dt.prototype.delete=function(t){return It(this,t).delete(t)},Dt.prototype.get=function(t){return It(this,t).get(t)},Dt.prototype.has=function(t){return It(this,t).has(t)},Dt.prototype.set=function(t,e){return It(this,t).set(t,e),this},jt.prototype.clear=function(){this.__data__=new Mt},jt.prototype.delete=function(t){return this.__data__.delete(t)},jt.prototype.get=function(t){return this.__data__.get(t)},jt.prototype.has=function(t){return this.__data__.has(t)},jt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Mt){var o=r.__data__;if(!ft||o.length<199)return o.push([t,e]),this;r=this.__data__=new Dt(o)}return r.set(t,e),this};var Rt=ht?J(ht,Object):function(){return[]},Wt=function(t){return et.call(t)};function Ht(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||S.test(t))&&t>-1&&t%1==0&&t<e}function Gt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Z)}function zt(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $t(t,e){return t===e||t!=t&&e!=e}(pt&&Wt(new pt(new ArrayBuffer(1)))!=b||ft&&Wt(new ft)!=h||dt&&Wt(dt.resolve())!=p||yt&&Wt(new yt)!=d||wt&&Wt(new wt)!=g)&&(Wt=function(t){var e=et.call(t),r=e==_?t.constructor:void 0,o=r?zt(r):void 0;if(o)switch(o){case mt:return b;case bt:return h;case vt:return p;case kt:return d;case xt:return g}return e});var Jt=Array.isArray;function Ut(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}(t.length)&&!Vt(t)}var Yt=ct||function(){return!1};function Vt(t){var e=qt(t)?et.call(t):"";return e==l||e==u}function qt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Zt(t){return Ut(t)?Et(t):function(t){if(!Gt(t))return _t(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}e.exports=function(t){return Nt(t,!0,!0)}}(G,G.exports);var z=G.exports;var $=function(){function t(t){this.module=null,this.cameraArraySize=0,this.cameraArrayPtr=0,this.cameraArray=null,this.cameraWidth=0,this.cameraHeight=0,this.loadImageHandler=null,this.loadJSONHandler=null,this.currentTutorial=null,this.loadedMasks=new Map,this.loadedJSONs=new Map,this.emscriptenConstructor=null,this.emscriptenLocateFileFunc=null,this.requestOverride=null,this.printOverride=null,this.loadTutorialResourcesInParallel=!1,this.instantiateWasmOverride=null,this.emscriptenConstructor=t}return t.prototype.load=function(t,e,r){return W(this,void 0,void 0,(function(){var o=this;return H(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){var i={canvas:t,postRun:function(){o.log("postRun"),i.cw_init=i.cwrap("init",null,["number","number"]),i.cw_setFaceTrackerData=i.cwrap("setFaceTrackerData",null,["array","number","number","number","number","number","number","number"]),i.cw_resetTrackerData=i.cwrap("resetTrackerData",null,[]),i.cw_setTutorial=i.cwrap("setTutorial",null,["string"]),i.cw_setStepIndex=i.cwrap("setStepIndex",null,["number"]),i.cw_addImageToCache=i.cwrap("addImageToCache",null,["string","number","number","number","number"]),i.cw_addJSONToCache=i.cwrap("addJSONToCache",null,["string","string"]),i.cw_render=i.cwrap("render",null,["number","number","number"]),i.cw_resizeView=i.cwrap("resizeView",null,["number","number"]),i.cw_startTutorial=i.cwrap("startTutorial",null,[]),i.cw_pauseTutorial=i.cwrap("pauseTutorial",null,[]),i.cw_resumeTutorial=i.cwrap("resumeTutorial",null,[]),i.cw_stopTutorial=i.cwrap("stopTutorial",null,[]),i.cw_shouldDrawMakeup=i.cwrap("shouldDrawMakeup","boolean",[]),i.cw_shouldDrawTutorial=i.cwrap("shouldDrawTutorial","boolean",[]),i.cw_getProgress=i.cwrap("getProgress","number",[]),i.cw_setPlayCount=i.cwrap("setPlayCount",null,["number"]),i.cw_setStepAnimationDuration=i.cwrap("setStepAnimationDuration",null,["number"]),i.cw_setDelayBeforeRepeat=i.cwrap("setDelayBeforeRepeat",null,["number"]),i.cw_setShowMakeupWhenStepDone=i.cwrap("setShowMakeupWhenStepDone",null,["boolean"]),i.cw_setShouldDrawOriginal=i.cwrap("setShouldDrawOriginal",null,["boolean"]),i.cw_init(e,r),n()}};if("undefined"!=typeof XMLHttpRequest)i.request=XMLHttpRequest;else{if(!o.requestOverride)throw new Error("CoreSDKWrapper.requestOverride was not set");i.request=o.requestOverride}o.emscriptenLocateFileFunc&&(i.locateFile=o.emscriptenLocateFileFunc),o.printOverride&&(i.print=o.printOverride,i.printErr=o.printOverride),o.instantiateWasmOverride&&(i.instantiateWasm=o.instantiateWasmOverride),o.module=o.emscriptenConstructor(i)}))];case 1:return n.sent(),this.currentTutorial&&this.setTutorial(this.currentTutorial),[2]}}))}))},t.prototype.log=function(t){this.printOverride?this.printOverride(t):console.log(t)},t.prototype.allocateCameraBuffer=function(t,e){return W(this,void 0,void 0,(function(){var r;return H(this,(function(o){return r=t*e*4,this.cameraArraySize!==r&&(this.cameraArrayPtr&&this.module._free(this.cameraArrayPtr),this.cameraArraySize=r,this.cameraArrayPtr=this.module._malloc(r),this.cameraWidth=t,this.cameraHeight=e),this.cameraArray=new Uint8Array(this.module.HEAPU8.buffer,this.cameraArrayPtr,r),[2]}))}))},t.prototype.preloadMask=function(t,e,r){return W(this,void 0,void 0,(function(){var o,n,i,a,s,l,u,h;return H(this,(function(c){switch(c.label){case 0:return this.loadedMasks.get(t)?(this.loadedMasks.get(t).isGrayscale!==e&&console.warn(t+" is already loaded with different color settings"),[2]):(this.log("Loading mask "+t+", grayscale: "+e),[4,this.loadImageHandler(t,e,r)]);case 1:return o=c.sent(),n=o.buffer,i=o.width,a=o.height,l=i*a*(s=e?1:4),u=this.module._malloc(l),new Uint8Array(this.module.HEAPU8.buffer,u,l).set(n),h={storagePointer:u,isGrayscale:e},this.loadedMasks.set(t,h),this.module.cw_addImageToCache(t,u,i,a,s),[2]}}))}))},t.prototype.preloadJSON=function(t){return W(this,void 0,void 0,(function(){var e,r;return H(this,(function(o){switch(o.label){case 0:return this.loadedJSONs.get(t)?[2]:(this.log("Loading json "+t),[4,this.loadJSONHandler(t)]);case 1:return e=o.sent(),r={json:e},this.loadedJSONs.set(t,r),this.module.cw_addJSONToCache(t,e),[2]}}))}))},t.isDeformableLayer=function(t){return void 0!==t.maskJSONPath},t.prototype.preloadFilesForTutorial=function(e){return W(this,void 0,void 0,(function(){var r,o,n,i,a=this;return H(this,(function(s){switch(s.label){case 0:return r=[],o=function(e){if(e.maskImagePath&&e.maskImagePath.length>0){var o="makeup"===e.blendMode;r.push(a.preloadMask(e.maskImagePath,o,!1)),"makeupBlend"!==e.blendMode&&"alphaBlend"!==e.blendMode||r.push(a.preloadMask("white.png",!0,!0))}t.isDeformableLayer(e)&&(e.maskJSONPath&&e.maskJSONPath.length>0&&r.push(a.preloadJSON(e.maskJSONPath)),e.eraseMasks&&e.eraseMasks.forEach((function(t){t.maskImagePath&&t.maskImagePath.length>0&&r.push(a.preloadMask(t.maskImagePath,!0,!1)),t.maskJSONPath&&t.maskJSONPath.length>0&&r.push(a.preloadJSON(t.maskJSONPath))})))},n=function(t){t.forEach((function(t){r.push(a.preloadMask(t.path,t.isGrayscale,t.isBuiltInResource))}))},i=function(t){var e;(null===(e=t.product)||void 0===e?void 0:e.skinGlow)>0&&n([{path:"GlowMasksCropped2.png",isGrayscale:!1,isBuiltInResource:!0},{path:"white.png",isGrayscale:!0,isBuiltInResource:!0}])},e.steps.forEach((function(t){var e,r;if(t.blushLayer&&(o(t.blushLayer),n([{path:"Blush/blush_drop_4_sub_left_2.png",isGrayscale:!0,isBuiltInResource:!0},{path:"Blush/blush_drop_for_outline.png",isGrayscale:!0,isBuiltInResource:!0}])),t.eyeLinerLayer&&o(t.eyeLinerLayer),t.mascaraLayer&&o(t.mascaraLayer),t.eyeShadowLayer&&o(t.eyeShadowLayer),t.concealerLayer&&(o(t.concealerLayer),i(t.concealerLayer)),(null===(r=null===(e=t.lipstickLayer)||void 0===e?void 0:e.product)||void 0===r?void 0:r.envMappingIntensity)>0){var a=[{path:"map6_normals.png",isGrayscale:!1,isBuiltInResource:!0}];void 0!==t.lipstickLayer.presetStyle&&"brilliant"===t.lipstickLayer.presetStyle?a.push({path:"cube2.png",isGrayscale:!1,isBuiltInResource:!0}):a.push({path:"cube3.png",isGrayscale:!1,isBuiltInResource:!0}),n(a)}})),this.loadTutorialResourcesInParallel?[4,Promise.all(r)]:[3,2];case 1:case 3:return s.sent(),[2];case 2:return[4,r.reduce((function(t,e){return t.then((function(){return e}))}),Promise.resolve())]}}))}))},t.prototype.destroy=function(){this.module&&this.cameraArrayPtr&&this.module._free(this.cameraArrayPtr)},t.prototype.setLoadImageHandler=function(t){this.loadImageHandler=t},t.prototype.setLoadJSONHandler=function(t){this.loadJSONHandler=t},t.prototype.setTutorial=function(t){return W(this,void 0,void 0,(function(){var e;return H(this,(function(r){switch(r.label){case 0:return this.currentTutorial=z(t),[4,this.preloadFilesForTutorial(this.currentTutorial)];case 1:return r.sent(),e=function(t){return JSON.stringify(t)}(this.currentTutorial),this.module?this.module.cw_setTutorial(e):this.log("setTutorial: module not loaded"),[2]}}))}))},t.prototype.getTutorialData=function(){return z(this.currentTutorial)},t.prototype.setTutorialStep=function(t){this.module&&this.module.cw_setStepIndex(t)},t.prototype.setFaceTrackerData=function(t,e,r,o,n,i,a){if(this.module){var s=l.serialize(t);this.module.cw_setFaceTrackerData(s,s.length,e,r,o,n,i,a)}},t.prototype.resetTrackerData=function(){this.module&&this.module.cw_resetTrackerData()},t.prototype.startTutorial=function(){this.module&&this.module.cw_startTutorial()},t.prototype.pauseTutorial=function(){this.module&&this.module.cw_pauseTutorial()},t.prototype.resumeTutorial=function(){this.module&&this.module.cw_resumeTutorial()},t.prototype.stopTutorial=function(){this.module&&this.module.cw_stopTutorial()},t.prototype.shouldDrawMakeup=function(){return!!this.module&&this.module.cw_shouldDrawMakeup()},t.prototype.shouldDrawTutorial=function(){return!!this.module&&this.module.cw_shouldDrawTutorial()},t.prototype.getProgress=function(){return this.module?this.module.cw_getProgress():0},t.prototype.setPlayCount=function(t){this.module&&this.module.cw_setPlayCount(t)},t.prototype.setStepAnimationDuration=function(t){this.module&&this.module.cw_setStepAnimationDuration(t)},t.prototype.setDelayBeforeRepeat=function(t){this.module&&this.module.cw_setDelayBeforeRepeat(t)},t.prototype.setShowMakeupWhenStepDone=function(t){this.module&&this.module.cw_setShowMakeupWhenStepDone(t)},t.prototype.setShouldDrawOriginal=function(t){this.module&&this.module.cw_setShouldDrawOriginal(t)},t.prototype.render=function(t,e,o){r(e*o*4===t.byteLength),this.module?(this.allocateCameraBuffer(e,o),this.cameraArray.set(t),this.module.cw_render(e,o,this.cameraArrayPtr)):this.log("render: module not loaded")},t.prototype.resizeView=function(t,e){r(t>0&&e>0,"New view dimensions cannot be zero"),this.module&&this.module.cw_resizeView(t,e)},t.prototype.redraw=function(){this.module&&this.cameraArrayPtr&&this.module.cw_render(this.cameraWidth,this.cameraHeight,this.cameraArrayPtr)},t}(),J=e.exports.Color;export{F as ArrowParameters,P as BlushLayer,J as Color,A as ConcealerLayer,E as DeformableCustomLayer,M as DeformableFoundationLayer,j as EraseDeformableCustomLayer,v as EyeLinerLayer,x as EyeshadowLayer,O as FaceOverlayLayer,l as FacePoints,T as FoundationLayer,b as LipstickLayer,g as MakeupLayer,k as MascaraLayer,o as PixelData,i as Point,h as Product,C as ReferencePoint,B as Step,u as Timer,$ as TutorialCoreSDKWrapper,R as TutorialData,I as WipeParameters,r as assert};
